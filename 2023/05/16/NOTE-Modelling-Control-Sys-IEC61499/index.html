<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>【笔记】Modelling Control Systeme Using IEC61499 | Lost N Found</title><meta name="author" content="Guohao"><meta name="copyright" content="Guohao"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="关于《Modelling Control Systeme Using IEC61499》的读书笔记">
<meta property="og:type" content="article">
<meta property="og:title" content="【笔记】Modelling Control Systeme Using IEC61499">
<meta property="og:url" content="https://lostnfound.top/2023/05/16/NOTE-Modelling-Control-Sys-IEC61499/index.html">
<meta property="og:site_name" content="Lost N Found">
<meta property="og:description" content="关于《Modelling Control Systeme Using IEC61499》的读书笔记">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://lostnfound.top/linear-gradient(45deg,%20#8EC3B0,%20#9ED5C5,%20#F8C4B4,%20#FF8787)">
<meta property="article:published_time" content="2023-05-16T02:46:01.000Z">
<meta property="article:modified_time" content="2023-05-19T07:33:12.753Z">
<meta property="article:author" content="Guohao">
<meta property="article:tag" content="自动化">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://lostnfound.top/linear-gradient(45deg,%20#8EC3B0,%20#9ED5C5,%20#F8C4B4,%20#FF8787)"><link rel="shortcut icon" href="/img/favicon.ico"><link rel="canonical" href="https://lostnfound.top/2023/05/16/NOTE-Modelling-Control-Sys-IEC61499/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":100,"languages":{"author":"作者: Guohao","link":"链接: ","source":"来源: Lost N Found","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '【笔记】Modelling Control Systeme Using IEC61499',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-05-19 15:33:12'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.1.0"><link rel="alternate" href="/atom.xml" title="Lost N Found" type="application/atom+xml">
</head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">36</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">20</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">8</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-battery-full"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-calendar-check"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-hashtag"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-user-circle"></i><span> 关于我</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" target="_blank" rel="noopener" href="https://github.com/Dave0126"><i class="fa-fw fab fa-github"></i><span> Github</span></a></li><li><a class="site-page child" href="mailto:dave980126@outlook.com"><i class="fa-fw fas fa-envelope"></i><span> Mail</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background: linear-gradient(45deg, #8EC3B0, #9ED5C5, #F8C4B4, #FF8787)"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Lost N Found</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-battery-full"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-calendar-check"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-hashtag"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-user-circle"></i><span> 关于我</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" target="_blank" rel="noopener" href="https://github.com/Dave0126"><i class="fa-fw fab fa-github"></i><span> Github</span></a></li><li><a class="site-page child" href="mailto:dave980126@outlook.com"><i class="fa-fw fas fa-envelope"></i><span> Mail</span></a></li></ul></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">【笔记】Modelling Control Systeme Using IEC61499</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-05-16T02:46:01.000Z" title="发表于 2023-05-16 10:46:01">2023-05-16</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-05-19T07:33:12.753Z" title="更新于 2023-05-19 15:33:12">2023-05-19</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E8%87%AA%E5%8A%A8%E5%8C%96/">自动化</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">6k</span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="1-介绍"><a class="markdownIt-Anchor" href="#1-介绍"></a> 1. 介绍</h1>
<h2 id="背景"><a class="markdownIt-Anchor" href="#背景"></a> 背景</h2>
<p>目前为止，工业控制系统分成了两大阵营。一类是基于传统的分布式控制系统(DCS)，另一类是基于可编程逻辑控制器（PLC）。</p>
<ul>
<li>
<p>现行的DCS 主要应用于化工厂和炼油厂。它们是由少量的大型中央处理器构成，提供监控和数据采集。通过本地网络和部署在工厂中的众多控制器，仪表，传感器和执行部件相联。</p>
<img src="/2023/05/16/NOTE-Modelling-Control-Sys-IEC61499/image-20230516105230518.png" alt="image-20230516105230518" style="zoom:80%;">
<p>系统可以具有分立的仪表和超级工作站。超级工作站由本地控制器和一串仪表构成。在一个DCS 中，许多的监控来自于一个或者多个中心处理器。工厂中的仪表提供本地的闭环控制，例如PID 控制。</p>
</li>
<li>
<p>在许多机器控制和生产过程控制中（特别是自动化生产线中），控制系统是使用PLC来设计的。</p>
<img src="/2023/05/16/NOTE-Modelling-Control-Sys-IEC61499/image-20230516105952159.png" alt="image-20230516105952159" style="zoom:80%;">
<p>大型PLC 系统通常由多个PLC ，它们通过一个或者多个特定的高速网络相互通信。PLC 一般连接大量的输入输出（I/O) 信号，由它们处理传感器和执行部件。在这种场合，分立仪表，比如温度，压力传感器也连接到PLC 上。</p>
</li>
</ul>
<p>使用这两种设计方法，系统都倾向编写一个大型单一的软件包。这种软件通常很难在新的应用中重复使用，相互之间集成也非常困难。DCS和PLC 两种系统<u><em><strong>难以修改和扩展，不能提供高度的灵活性</strong></em></u>。而这一点却是先进，灵活的控制系统所期望的。</p>
<h2 id="iec-61499-function-block-standard"><a class="markdownIt-Anchor" href="#iec-61499-function-block-standard"></a> IEC 61499 function block standard</h2>
<p>IEC 已经开发了一个专门的标准 IEC61499 ，它定义了如何将功能块（<u><em><strong>function block</strong></em></u>）用于分布式工业过程，测量和控制系统。这项工作有助于解决语义集成的问题。</p>
<blockquote>
<p>&quot;In industrial systems, function blocks are an established concept for defining robust, re-usable software components. A function block can provide a software solution to a small problem, such as the control of a valve, or control a major unit of plant, such as a complete production line.</p>
<p>Function blocks allow industrial algorithms to be encapsulated in a form that can be readily understood and applied by people who are not software specialists. Each block has a defined set of input parameters, which are read by the internal algorithm when it executes. The results from the algorithm are written to the block’s outputs. Complete applications can be built from networks of function blocks formed by interconnecting block inputs and outputs.&quot;</p>
<p>在工业系统中，功能块建立了定义鲁棒性，可重用软件组件的概念。一个功能块能够提供解决小问题的软件解决方法，比如控制阀门。也可以解决一个工厂的主要部件，例如完整的生产线。</p>
<p>功能块允许工业算法封装在一种可理解的形式中，使非软件专家的人士可以使用。每个功能块都有数据输入，供算法执行时读取。算法的结果写入功能块的输出。完整的应用由功能块输入输出互联的功能块网络组成。</p>
</blockquote>
<p>现场总线是连接智能现场设备和自动化系统的数字式、双向传输、多分支结构的通讯网络。也就是说基于现场总线的系统是以单个分散的，数字化，智能化的测量和控制设备作为网络的节点，用总线相连，实现信息的相互交换，使得不同网络，不同现场设备之间可以信息共享。</p>
<h3 id="为什么使用功能块"><a class="markdownIt-Anchor" href="#为什么使用功能块"></a> 为什么使用功能块？</h3>
<p>在面向对象程序设计中的<u><em><strong>对象</strong></em></u>在某种程度上类似于<u><em><strong>功能块</strong></em></u>。对象的概念之所以成功，是因为它们能够为在真实世界的概念和项目建立行为建模。</p>
<blockquote>
<p>使用对象带来的好处：</p>
<ol>
<li>对象反映现实世界。将与应用程序关联的现实世界实体表示为对象，更为自然和直观</li>
<li>对象是稳定的。通常，对象是经过验证的软件元素，不会发生重大变化</li>
<li>对象降低了复杂性。开发人员可以在不真正理解对象内部如何工作的情况下使用对象。可以通过创建和链接对象来开发应用程序通常不需要了解对象的内部结构</li>
<li>对象是可重用的。一旦一个对象被开发和测试，它就可以成为开发人员的一部分（类库）。</li>
</ol>
</blockquote>
<p>功能块也具有这些特性中的大部分，由此所带来的好处有：</p>
<ul>
<li>减少了为应用程序开发的控制软件的数量</li>
<li>减少了开发控制系统所需的时间</li>
<li>使用相同类型功能块的控制系统将具有更一致的行为</li>
<li>使得控制系统更易于测试</li>
</ul>
<h3 id="功能块与对象的联系与区别"><a class="markdownIt-Anchor" href="#功能块与对象的联系与区别"></a> 功能块与对象的联系与区别</h3>
<table>
<thead>
<tr>
<th>Feature</th>
<th>Objects</th>
<th>FBs</th>
<th>Comment</th>
</tr>
</thead>
<tbody>
<tr>
<td>封装数据</td>
<td>✅</td>
<td>✅</td>
<td>对象可能包含同时也是其他对象实例的数据；<br>功能块可能包含其他功能块的实例。</td>
</tr>
<tr>
<td>外部接口</td>
<td>✅</td>
<td>✅</td>
<td>在 IEC 61499 中，私有接口和公共接口之间没有区别和事件</td>
</tr>
<tr>
<td>调用</td>
<td>对象有含参方法和返回值</td>
<td>FB输入输出变量和事件</td>
<td>在FB中，数据可以与事件同步</td>
</tr>
<tr>
<td>继承</td>
<td>✅</td>
<td>❌</td>
<td>目前在 IEC 61499 中没有功能块继承行为的机制</td>
</tr>
<tr>
<td>多态</td>
<td>✅</td>
<td>✅</td>
<td>EC 61499 引入了一个“Adaptor”概念，允许功能块共享公共接口</td>
</tr>
<tr>
<td>实例化</td>
<td>对象类和功能块类型是同义的</td>
<td>功能块实例是由功能块类型定义的</td>
<td></td>
</tr>
</tbody>
</table>
<h1 id="2-iec-61499中的模型与概念"><a class="markdownIt-Anchor" href="#2-iec-61499中的模型与概念"></a> 2. IEC 61499中的模型与概念</h1>
<p>本章将回顾 IEC 61499 中定义的主要模型和概念，以全面了解功能块标准。IEC 61499 的主要目的不是作为一种编程方法，而是作为分布式系统的架构和模型。按照定义，该标准无意直接由编程工具使用。相反，IEC 61499 提供了一组模型来描述使用功能块编程的分布式系统。</p>
<p>本章涵盖的主题包括：</p>
<ul>
<li>分布式控制系统的系统、设备和资源模型</li>
<li>表示分布式应用程序的模型</li>
<li>功能块的特性及其执行</li>
<li>不同形式的功能块的类型规范</li>
<li>服务接口功能块提供硬件和操作系统的接口</li>
<li>适配器（Adaptor）用于共享块接口</li>
<li>用于定义 IEC 61499 实体的文本语法。</li>
</ul>
<h2 id="21-系统模型"><a class="markdownIt-Anchor" href="#21-系统模型"></a> 2.1 系统模型</h2>
<p>我们将从IEC 61499 中定义的顶层系统模型开始，这定义了通信设备和应用程序之间的关系。</p>
<p>分布式应用程序将被设计为连接功能块的网络。但是，当应用程序加载到系统上时，它通常会作为<br>
一系列功能块网络片段加载到不同的设备中。由各个设备提供的通行服务确保构成应用程序一部分的功能块维护其数据和事件连接。</p>
<img src="/2023/05/16/NOTE-Modelling-Control-Sys-IEC61499/image-20230518144157171.png" alt="image-20230518144157171" style="zoom:60%;">
<blockquote>
<p>IEC 61499 系统模型允许设备支持多个应用程序的执行。该标准定义了一种设备模型，可以在不干扰现有应用程序的情况下加载和卸载分布式应用程序；这是通过使用设备内的管理服务来实现的这些将在第 4 章后面进行介绍</p>
</blockquote>
<h2 id="22-设备模型"><a class="markdownIt-Anchor" href="#22-设备模型"></a> 2.2 设备模型</h2>
<img src="/2023/05/16/NOTE-Modelling-Control-Sys-IEC61499/image-20230518151147145.png" alt="image-20230518151147145" style="zoom:70%;">
<p>一个设备能够支持一个或多个资源。 IEC 61499 中的资源具有与 PLC 编程语言标准 IEC 61131‑3 中定义的资源概念类似的属性。资源提供功能块网络的独立执行和控制。</p>
<p>设备模型有一个“进程接口”，它提供使资源能够与物理设备上的输入和输出 (I/O) 点交换数据的服务。还有一个通信接口，为资源提供通信服务，通过外部网络与远程设备中的资源交换数据。</p>
<p>过程和通信接口的内部结构和行为不在 IEC 61499 的范围内，但它们有望提供一系列服务以支持资源内功能块的执行。</p>
<p>该设备的目的是提供一种基础设施来维持一种或多种资源。功能块网络的片段分布在本地设备或远程设备资源中的资源之间。</p>
<h2 id="23-资源模型"><a class="markdownIt-Anchor" href="#23-资源模型"></a> 2.3 资源模型</h2>
<p>该资源提供设施和服务以支持一个或多个功能块应用程序片段的执行。IEC 61499 的主要重点是对每个资源内功能块的行为进行建模。该资源为通信系统和“设备特定进程”提供接口，即与设备紧密相连的外部服务和子系统，例如设备 I/O 子系统。</p>
<blockquote>
<p>例如，每个资源都将有一个到通信系统的接口，以允许功能块与远程资源中的块交换数据，以及一个接口来读取和写入本地设备输入和输出（I/O）。</p>
</blockquote>
<img src="/2023/05/16/NOTE-Modelling-Control-Sys-IEC61499/image-20230519093741295.png" alt="image-20230519093741295" style="zoom:80%;">
<p>图 2.3 描述了 IEC 61499 资源的主要特征，它显示了一个由数据和事件流链接的互连功能块网络。资源提供的调度功能确保功能块内的算法以正确的顺序执行，即按照事件到达每个功能块的要求。</p>
<ul>
<li>其中，“服务接口” (Service Interface) 功能块是一种特殊形式的功能块，它提供功能块和资源接口之间的链接。例如，通信 SI 块可用于读取数据或将数据发送到远程资源中的功能块。</li>
</ul>
<p>资源的一个重要特征是它支持独立操作，不会影响同一设备或网络中的其他资源。</p>
<blockquote>
<p>注意 ⚠️：</p>
<p>分布式应用程序的管理可能需要协调控制加载功能块网络片段的许多资源。实现这种协调所需的设施是 IEC 61499 <u><em><strong>尚未完全解决</strong></em></u>的问题。</p>
</blockquote>
<h2 id="24-应用模型"><a class="markdownIt-Anchor" href="#24-应用模型"></a> 2.4 应用模型</h2>
<p>在IEC 61499中，应用被定义为由事件和数据流链接的互连功能块网络。</p>
<ul>
<li>应用程序可以分散并分布在许多资源上。</li>
<li>在应用程序中，可以使用子应用程序进一步分解。</li>
<li>子应用程序具有功能块的外部特征，但可以包含功能块网络，这些功能块本身可以分布在其他资源上。该标准定义了应用程序分解的“分形”形式，允许在需要时将子应用程序进一步分解为更小的子应用程序。</li>
</ul>
<p>该应用程序定义了各个块之间所需的事件和数据流之间的关系。分布块的各种资源必须确保事件用于在正确的优先级和时间安排块内的适当算法。</p>
<img src="/2023/05/16/NOTE-Modelling-Control-Sys-IEC61499/image-20230519100703886.png" alt="image-20230519100703886" style="zoom:80%;">
<blockquote>
<p>注意，IEC 61499 功能块包含用于定义其完整行为的所有算法和初始化值。</p>
</blockquote>
<p>实际上，应用程序是解决特定自动化控制问题的一整套功能块和互连（interconnection）。应用程序由功能块实例和互连定义组成，在某些情况下，它们包括特定块类型的功能块的多个实例。 IEC 61499 的原则是所有行为都根据功能块定义。结果，我们将看到应用程序中没有可以存在于功能块之外的全局或局部变量。这是为基于<br>
IEC 61131‑3 的 PLC 创建的应用程序与 IEC 61499 应用程序之间的重要区别。</p>
<h2 id="25-功能块模型"><a class="markdownIt-Anchor" href="#25-功能块模型"></a> 2.5 功能块模型</h2>
<p>功能块（Function Block）是支持整个 IEC 61499 的核心，其具有自己的数据结构，并且由一个或者多个算法来处理它们。功能块类型（function block  type）提供了数据结构和算法的形式化描述。</p>
<p>功能块可以有多个实例（instance）。从形式上看，功能块和面向对象中的对象非常类似。</p>
<ul>
<li>
<p>每个功能块有一个类型名称和一个实例名称。</p>
</li>
<li>
<p>每一个功能块都有一系列事件输入（<code>Evnet Input</code>）。它们能够接收其它功能块通过事件连接传递的事件。</p>
</li>
<li>
<p>每个功能块都能有事件输出（<code>Evnet Output</code>）。它们向其它功能块传递事件。</p>
</li>
<li>
<p>每个功能块会有数据输入（<code>Data Input</code>）。传递给它其它功能块内部产生的数据。</p>
</li>
<li>
<p>每个功能块会有数据输出（<code>Data Output</code>）。将该功能块内部产生的数据传递该其它功能块。</p>
</li>
<li>
<p>每个区块都会有一组内部变量，用来保存算法调用之间保留的数值。</p>
</li>
<li>
<p>事件可以使用 “<code>WITH</code>” 修饰词与数据关联。在图形表示中，将事件和相关联的数据连接线交叉点画一个小方块。</p>
</li>
<li>
<p>功能块的行为定义为一系列的算法和状态信息。利用块的状态和状态的变化，可以建立各种策略的模型，以定义哪些算法将在响应特定事件时执行。</p>
</li>
</ul>
<img src="/2023/05/16/NOTE-Modelling-Control-Sys-IEC61499/image-20230519103529416.png" alt="image-20230519103529416" style="zoom:80%;">
<p>上图描述了 IEC 61499 功能块的主要特性：</p>
<ul>
<li>功能块的顶部，称为“执行控制（Execution Control）”部分，在某些情况下包含一个定义，以状态机的形式给出，用于将事件映射到算法；即它定义了下半部分定义的哪些算法在各种事件到达“执行控制”时被触发，以及输出事件何时被触发标准称之为“事件输入、事件输出和算法执行之间的因果关系”。该标准定义了映射到达事件输入的事件、内部算法的执行和输出事件的触发之间的关系的方法，这将在本章后面的部分中讨论。</li>
<li>功能块的下半部分包含算法和内部数据，它们都隐藏在功能块中。功能块是一种软件组件，如果设计得当，<br>
则不需要用户详细了解其内部设计。</li>
</ul>
<p>功能块依赖于其包含资源的支持来提供设施来调度算法并将请求映射到通信和处理接口。</p>
<p>该标准规定资源可以选择性地提供附加功能以允许访问功能块的内部。显然，在现场总线设备中，能够检查块内的内部变量对于维护或调试目的总是有用的。所以可能有“后门”方法来访问功能块内部；然而，从 IEC 61499 体系结构的角度来看，控制变量和事件仅通过外部公开接口传递。</p>
<h2 id="26-功能块类型"><a class="markdownIt-Anchor" href="#26-功能块类型"></a> 2.6 功能块类型</h2>
<p>IEC 61499 中的一个重要概念是定义功能块类型的能力，该类型定义了可以从该类型创建的功能块实例的行为和接口。这与面向对象软件中对象实例的行为由关联对象的类定义定义的方式同义。<br>
复合功能块和子应用程序类型的内部行为由功能块实例网络定义。因此，该定义包括需要存在于内部功能块实例之间的数据和事件连接。<br>
功能块类型由<u><em><strong>类型名称</strong></em></u>、块的<u><em><strong>输入和输出事件</strong></em></u>的正式定义以及<u><em><strong>输入和输出变量</strong></em></u>的定义定义。</p>
<h3 id="基本功能块类型"><a class="markdownIt-Anchor" href="#基本功能块类型"></a> 基本功能块类型</h3>
<p>基本功能块的行为是根据响应输入事件而调用的算法来定义的。当算法执行时，它们会触发输出事件，以表示块内发生了某些状态变化。事件到算法的映射使用称为执行控制图 (ECC)的特殊状态转换符号来表示。</p>
<h4 id="基本功能块的执行模型"><a class="markdownIt-Anchor" href="#基本功能块的执行模型"></a> 基本功能块的执行模型</h4>
<p>借助下图对基本功能块进行描述，功能块上的编号特征显示了块的不同部分由底层“调度功能”处理的顺序。该模型假设功能块所在的资源提供了一个调度功能，确保功能块执行的每个阶段以正确的顺序和正确的优先级发生。</p>
<p>在下图中有许多离散的时序阶段，每个时序阶段可能需要一段时间才能过去，这是基本功能块执行所必需的；每个阶段都取决于功能块和底层调度功能之间定义的交互。下图描述了基本功能块运行必须顺序出现的8个时序点；每个阶段的结束由特定编号的时间点定义：</p>
<img src="/2023/05/16/NOTE-Modelling-Control-Sys-IEC61499/image-20230519110753009.png" alt="image-20230519110753009" style="zoom:80%;">
<ul>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="bold">T</mi><mi mathvariant="bold">i</mi><mi mathvariant="bold">m</mi><msub><mi mathvariant="bold">e</mi><mn mathvariant="bold">1</mn></msub></mrow><annotation encoding="application/x-tex">\mathbf{Time_1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathbf">T</span><span class="mord mathbf">i</span><span class="mord mathbf">m</span><span class="mord"><span class="mord mathbf">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathbf mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span>：来自外部功能块的值（Data）在功能块输入处稳定</li>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="bold">T</mi><mi mathvariant="bold">i</mi><mi mathvariant="bold">m</mi><msub><mi mathvariant="bold">e</mi><mn mathvariant="bold">2</mn></msub></mrow><annotation encoding="application/x-tex">\mathbf{Time_2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathbf">T</span><span class="mord mathbf">i</span><span class="mord mathbf">m</span><span class="mord"><span class="mord mathbf">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathbf mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span>：与输入值（Data）关联的事件（Event）到达事件输入</li>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="bold">T</mi><mi mathvariant="bold">i</mi><mi mathvariant="bold">m</mi><msub><mi mathvariant="bold">e</mi><mn mathvariant="bold">3</mn></msub></mrow><annotation encoding="application/x-tex">\mathbf{Time_3}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathbf">T</span><span class="mord mathbf">i</span><span class="mord mathbf">m</span><span class="mord"><span class="mord mathbf">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathbf mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span>：功能块执行控制向调度功能发送信号，表明它具有输入值并准备好执行其算法</li>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="bold">T</mi><mi mathvariant="bold">i</mi><mi mathvariant="bold">m</mi><msub><mi mathvariant="bold">e</mi><mn mathvariant="bold">4</mn></msub></mrow><annotation encoding="application/x-tex">\mathbf{Time_4}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathbf">T</span><span class="mord mathbf">i</span><span class="mord mathbf">m</span><span class="mord"><span class="mord mathbf">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathbf mtight">4</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span>​：在资源的加载和性能特征确定的一段时间后，调度功能开始执行功能块的算法</li>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="bold">T</mi><mi mathvariant="bold">i</mi><mi mathvariant="bold">m</mi><msub><mi mathvariant="bold">e</mi><mn mathvariant="bold">5</mn></msub></mrow><annotation encoding="application/x-tex">\mathbf{Time_5}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathbf">T</span><span class="mord mathbf">i</span><span class="mord mathbf">m</span><span class="mord"><span class="mord mathbf">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathbf mtight">5</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span>​：该算法处理输入值，在某些情况下，还处理内部存储的值以创建写入功能块输出的新输出值</li>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="bold">T</mi><mi mathvariant="bold">i</mi><mi mathvariant="bold">m</mi><msub><mi mathvariant="bold">e</mi><mn mathvariant="bold">6</mn></msub></mrow><annotation encoding="application/x-tex">\mathbf{Time_6}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathbf">T</span><span class="mord mathbf">i</span><span class="mord mathbf">m</span><span class="mord"><span class="mord mathbf">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathbf mtight">6</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span>：算法完成其执行，并向调度函数发出信号以指示输出值稳定并准备就绪</li>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="bold">T</mi><mi mathvariant="bold">i</mi><mi mathvariant="bold">m</mi><msub><mi mathvariant="bold">e</mi><mn mathvariant="bold">7</mn></msub></mrow><annotation encoding="application/x-tex">\mathbf{Time_7}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathbf">T</span><span class="mord mathbf">i</span><span class="mord mathbf">m</span><span class="mord"><span class="mord mathbf">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathbf mtight">7</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span>​：调度功能调用功能块的执行控制以生成输出事件。根据到达的输入事件和执行控制的内部状态，可能会产生不同的输出事件</li>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="bold">T</mi><mi mathvariant="bold">i</mi><mi mathvariant="bold">m</mi><msub><mi mathvariant="bold">e</mi><mn mathvariant="bold">8</mn></msub></mrow><annotation encoding="application/x-tex">\mathbf{Time_8}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathbf">T</span><span class="mord mathbf">i</span><span class="mord mathbf">m</span><span class="mord"><span class="mord mathbf">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathbf mtight">8</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span>​：执行控制依次在功能块的输出事件接口上创建适当的输出事件。下游功能块使用输出事件表示它们现在可以使用此块生成的输出值</li>
</ul>
<blockquote>
<p>注意 ⚠️：</p>
<p>这些时序阶段不能重叠，并且必须按功能块正确执行的规定顺序发生。</p>
</blockquote>
<p>该标准定义了以下在构建应用程序时非常重要的持续时间：</p>
<ul>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi mathvariant="bold">T</mi><mrow><mi mathvariant="bold">s</mi><mi mathvariant="bold">e</mi><mi mathvariant="bold">t</mi><mi mathvariant="bold">u</mi><mi mathvariant="bold">p</mi></mrow></msub><mo>=</mo><mrow><mi mathvariant="bold">T</mi><mi mathvariant="bold">i</mi><mi mathvariant="bold">m</mi><msub><mi mathvariant="bold">e</mi><mn mathvariant="bold">2</mn></msub></mrow><mi mathvariant="normal">–</mi><mrow><mi mathvariant="bold">T</mi><mi mathvariant="bold">i</mi><mi mathvariant="bold">m</mi><msub><mi mathvariant="bold">e</mi><mn mathvariant="bold">1</mn></msub></mrow></mrow><annotation encoding="application/x-tex">\mathbf{T_{setup}}= \mathbf{Time_2} – \mathbf{Time_1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.972218em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.294444em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathbf mtight">s</span><span class="mord mathbf mtight">e</span><span class="mord mathbf mtight">t</span><span class="mord mathbf mtight">u</span><span class="mord mathbf mtight">p</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathbf">T</span><span class="mord mathbf">i</span><span class="mord mathbf">m</span><span class="mord"><span class="mord mathbf">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathbf mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span><span class="mord" style="margin-right:0.02778em;">–</span><span class="mord"><span class="mord mathbf">T</span><span class="mord mathbf">i</span><span class="mord mathbf">m</span><span class="mord"><span class="mord mathbf">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathbf mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span>：接收输入值与其关联的输入事件到达之间的时间</li>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi mathvariant="bold">T</mi><mrow><mi mathvariant="bold">s</mi><mi mathvariant="bold">t</mi><mi mathvariant="bold">a</mi><mi mathvariant="bold">r</mi><mi mathvariant="bold">t</mi></mrow></msub><mo>=</mo><mrow><mi mathvariant="bold">T</mi><mi mathvariant="bold">i</mi><mi mathvariant="bold">m</mi><msub><mi mathvariant="bold">e</mi><mn mathvariant="bold">4</mn></msub></mrow><mi mathvariant="normal">–</mi><mrow><mi mathvariant="bold">T</mi><mi mathvariant="bold">i</mi><mi mathvariant="bold">m</mi><msub><mi mathvariant="bold">e</mi><mn mathvariant="bold">2</mn></msub></mrow></mrow><annotation encoding="application/x-tex">\mathbf{T_{start}}= \mathbf{Time_4} – \mathbf{Time_2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83611em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.29444400000000004em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathbf mtight">s</span><span class="mord mathbf mtight">t</span><span class="mord mathbf mtight">a</span><span class="mord mathbf mtight">r</span><span class="mord mathbf mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathbf">T</span><span class="mord mathbf">i</span><span class="mord mathbf">m</span><span class="mord"><span class="mord mathbf">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathbf mtight">4</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span><span class="mord" style="margin-right:0.02778em;">–</span><span class="mord"><span class="mord mathbf">T</span><span class="mord mathbf">i</span><span class="mord mathbf">m</span><span class="mord"><span class="mord mathbf">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathbf mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span>：收输入事件和执行算法之间的时间； 这个持续时间可能取决于资源加载，即调度函数的待处理队列中还有多少其他功能块</li>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi mathvariant="bold">T</mi><mrow><mi mathvariant="bold">a</mi><mi mathvariant="bold">l</mi><mi mathvariant="bold">g</mi><mi mathvariant="bold">o</mi></mrow></msub><mo>=</mo><mrow><mi mathvariant="bold">T</mi><mi mathvariant="bold">i</mi><mi mathvariant="bold">m</mi><msub><mi mathvariant="bold">e</mi><mn mathvariant="bold">6</mn></msub></mrow><mi mathvariant="normal">–</mi><mrow><mi mathvariant="bold">T</mi><mi mathvariant="bold">i</mi><mi mathvariant="bold">m</mi><msub><mi mathvariant="bold">e</mi><mn mathvariant="bold">4</mn></msub></mrow></mrow><annotation encoding="application/x-tex">\mathbf{T_{algo}}= \mathbf{Time_6} – \mathbf{Time_4}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.972218em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361079999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathbf mtight">a</span><span class="mord mathbf mtight">l</span><span class="mord mathbf mtight" style="margin-right:0.01597em;">g</span><span class="mord mathbf mtight">o</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathbf">T</span><span class="mord mathbf">i</span><span class="mord mathbf">m</span><span class="mord"><span class="mord mathbf">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathbf mtight">6</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span><span class="mord" style="margin-right:0.02778em;">–</span><span class="mord"><span class="mord mathbf">T</span><span class="mord mathbf">i</span><span class="mord mathbf">m</span><span class="mord"><span class="mord mathbf">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathbf mtight">4</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span>：功能块算法开始和完成之间的时间</li>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi mathvariant="bold">T</mi><mrow><mi mathvariant="bold">f</mi><mi mathvariant="bold">i</mi><mi mathvariant="bold">n</mi></mrow></msub><mo>=</mo><mrow><mi mathvariant="bold">T</mi><mi mathvariant="bold">i</mi><mi mathvariant="bold">m</mi><msub><mi mathvariant="bold">e</mi><mn mathvariant="bold">8</mn></msub></mrow><mi mathvariant="normal">–</mi><mrow><mi mathvariant="bold">T</mi><mi mathvariant="bold">i</mi><mi mathvariant="bold">m</mi><msub><mi mathvariant="bold">e</mi><mn mathvariant="bold">6</mn></msub></mrow></mrow><annotation encoding="application/x-tex">\mathbf{T_{fin}}= \mathbf{Time_8} – \mathbf{Time_6}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83611em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathbf mtight" style="margin-right:0.10903em;">f</span><span class="mord mathbf mtight">i</span><span class="mord mathbf mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathbf">T</span><span class="mord mathbf">i</span><span class="mord mathbf">m</span><span class="mord"><span class="mord mathbf">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathbf mtight">8</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span><span class="mord" style="margin-right:0.02778em;">–</span><span class="mord"><span class="mord mathbf">T</span><span class="mord mathbf">i</span><span class="mord mathbf">m</span><span class="mord"><span class="mord mathbf">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathbf mtight">6</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span>：从完成算法到引发输出事件的时间</li>
</ul>
<img src="/2023/05/16/NOTE-Modelling-Control-Sys-IEC61499/image-20230519134256803.png" alt="image-20230519134256803" style="zoom:80%;">
<p>在不同的实现中，可能需要多种机制来确保功能块能够使用一致的数据来执行。例如，重要的是输入数据值在算法执行时保持稳定。该算法应该只使用在输入事件到达时存在的输入值，即输入事件可用于快照准备算法执行的输入值。</p>
<h3 id="复合功能块类型"><a class="markdownIt-Anchor" href="#复合功能块类型"></a> 复合功能块类型</h3>
<p>复合功能块和子应用程序类型的内部行为由功能块实例网络定义。因此，该定义包括需要存在于内部功能块实例之间的数据和事件连接。</p>
<h3 id="服务接口功能块类型"><a class="markdownIt-Anchor" href="#服务接口功能块类型"></a> 服务接口功能块类型</h3>
<p>服务接口 (SI) 功能块提供功能块域和外部服务之间的接口，例如与远程设备中的功能块通信或读取硬件实时时钟的值。因为 SI 功能块类型主要与数据事务有关，所以它是使用<u><em><strong>时序图定</strong></em></u>义的。这种形式的图更常用于定义跨通信接口的事务。时序图将在本章后面的服务接口块部分进行描述。</p>
<h2 id="27-分布式模型"><a class="markdownIt-Anchor" href="#27-分布式模型"></a> 2.7 分布式模型</h2>
<p>应用程序和子应用程序都可以“分布式”，即配置为在多个资源上运行。分布式应用程序将由功能块网络组成，功能块的片段在指定资源上运行。请注意，IEC 61499 认为分布涉及不同资源上功能块的排列。因为一个设备可以支持多种资源，所以分布式应用程序可以在单个设备上运行，即使用同一设备内的资源。子应用程序是一种较小的应用程序形式，可以复制，但在其他方面具有与应用程序相同的分布特征。</p>
<p>功能块和应用程序之间存在重要区别。</p>
<ul>
<li>应用程序或子应用程序的时间和性能将取决于它所分布的资源以及连接它们的通信网络。如果两个网络的通信数据速率差异很大，因此两个子应用程序显然会由于网络延迟而具有不同的性能和响应时间，尽管它们的内部软件算法是相同的。</li>
<li>相反，功能块被假定为“原子的”并且仅在单个资源中运行。在这方面，功能块的性能不受通信网络特性的影响。但是，性能可能会在较小程度上受到实例化块的资源和设备的行为和特性的影响。下表总结了这些分布特征。</li>
</ul>
<table>
<thead>
<tr>
<th></th>
<th>Distributable</th>
<th>Timing</th>
<th>Reliability</th>
<th>Replication</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Function Block</strong></td>
<td>❌</td>
<td>只依赖于设备</td>
<td>只依赖于设备</td>
<td>FB类型的实例</td>
</tr>
<tr>
<td><strong>Sub-Application</strong></td>
<td>✅</td>
<td>依赖于设备和通讯</td>
<td>依赖于设备和通讯</td>
<td>子应用类型的副本</td>
</tr>
<tr>
<td><strong>Application</strong></td>
<td>✅</td>
<td>依赖于设备和通讯</td>
<td>依赖于设备和通讯</td>
<td>无</td>
</tr>
</tbody>
</table>
<h2 id="28-管理模型"><a class="markdownIt-Anchor" href="#28-管理模型"></a> 2.8 管理模型</h2>
<p>在上面我们说到，资源可以支持构成分布式应用程序或子应用程序的一部分的功能块网络片段。但这些应用程序分段如何被创建和管理？</p>
<p>为此，IEC 61499 还定义了一种特殊形式的应用程序，称为“管理应用程序（Management Application）” ，负责在资源内创建功能块网络。管理应用程序具有比普通应用程序更高的特权功能，可以通过创建功能块和连接来构造其他应用程序的一部分。它通常会通过通信链路与远程编程站等外部代理进行交互。</p>
<p>管理应用程序的功能将包括：</p>
<ul>
<li>在一个资源中创建功能块实例</li>
<li>将功能块片段与一个特定的应用程序联系起来</li>
<li>在功能块和服务接口块之间建立数据和事件连接</li>
<li>作为分布式应用的一部分启动功能块的执行</li>
<li>提供服务以支持从通信链路上查询功能块实例的状态功能块实例的查询</li>
<li>删除功能块实例以及它们的数据和事件连接。</li>
</ul>
<p>一个重要的约束是管理应用程序应该能够为不同的应用程序加载功能块网络片段，而不会干扰其他正<br>
在运行的应用程序的执行。</p>
<p>管理应用程序的一部分可能将以非易失性形式存在于设备中，并且总是能够在设备加电时加载应用程序。</p>
<p>该标准提出了两种提供管理应用程序的方案：</p>
<ul>
<li>
<p>下图描绘了一个具有特殊“管理资源”的设备，该资源包含管理应用程序，这些应用程序提供在设备中提供的相邻资源中建立和维护功能块网络的功能。</p>
<img src="/2023/05/16/NOTE-Modelling-Control-Sys-IEC61499/image-20230519152240514.png" alt="image-20230519152240514" style="zoom:90%;">
</li>
<li>
<p>在图2.9中，定义了另一种方案，即每个资源包含一个管理应用程序，负责在同一资源中加载功能块网络。<br>
管理应用程序的建模方式与其他使用功能块网络和服务接口功能块的应用程序的建模方式完全相同。一个管理应用程序很可能需要一些服务接口功能块来处理与外部通信链路的接口，例如，处理创建功能块实例的请求。</p>
</li>
</ul>
<img src="/2023/05/16/NOTE-Modelling-Control-Sys-IEC61499/image-20230519153022606.png" alt="image-20230519153022606" style="zoom:80%;">
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="https://lostnfound.top">Guohao</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://lostnfound.top/2023/05/16/NOTE-Modelling-Control-Sys-IEC61499/">https://lostnfound.top/2023/05/16/NOTE-Modelling-Control-Sys-IEC61499/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://lostnfound.top" target="_blank">Lost N Found</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E8%87%AA%E5%8A%A8%E5%8C%96/">自动化</a></div><div class="post_share"><div class="social-share" data-image="/linear-gradient(45deg,%20#8EC3B0,%20#9ED5C5,%20#F8C4B4,%20#FF8787)" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="gitalk-container"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Guohao</div><div class="author-info__description">L’existence précède l‘essence</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">36</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">20</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">8</div></a></div><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/Dave0126" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:dave980126@outlook.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#1-%E4%BB%8B%E7%BB%8D"><span class="toc-text"> 1. 介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%83%8C%E6%99%AF"><span class="toc-text"> 背景</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#iec-61499-function-block-standard"><span class="toc-text"> IEC 61499 function block standard</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BD%BF%E7%94%A8%E5%8A%9F%E8%83%BD%E5%9D%97"><span class="toc-text"> 为什么使用功能块？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8A%9F%E8%83%BD%E5%9D%97%E4%B8%8E%E5%AF%B9%E8%B1%A1%E7%9A%84%E8%81%94%E7%B3%BB%E4%B8%8E%E5%8C%BA%E5%88%AB"><span class="toc-text"> 功能块与对象的联系与区别</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-iec-61499%E4%B8%AD%E7%9A%84%E6%A8%A1%E5%9E%8B%E4%B8%8E%E6%A6%82%E5%BF%B5"><span class="toc-text"> 2. IEC 61499中的模型与概念</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#21-%E7%B3%BB%E7%BB%9F%E6%A8%A1%E5%9E%8B"><span class="toc-text"> 2.1 系统模型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#22-%E8%AE%BE%E5%A4%87%E6%A8%A1%E5%9E%8B"><span class="toc-text"> 2.2 设备模型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#23-%E8%B5%84%E6%BA%90%E6%A8%A1%E5%9E%8B"><span class="toc-text"> 2.3 资源模型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#24-%E5%BA%94%E7%94%A8%E6%A8%A1%E5%9E%8B"><span class="toc-text"> 2.4 应用模型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#25-%E5%8A%9F%E8%83%BD%E5%9D%97%E6%A8%A1%E5%9E%8B"><span class="toc-text"> 2.5 功能块模型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#26-%E5%8A%9F%E8%83%BD%E5%9D%97%E7%B1%BB%E5%9E%8B"><span class="toc-text"> 2.6 功能块类型</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E5%8A%9F%E8%83%BD%E5%9D%97%E7%B1%BB%E5%9E%8B"><span class="toc-text"> 基本功能块类型</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E5%8A%9F%E8%83%BD%E5%9D%97%E7%9A%84%E6%89%A7%E8%A1%8C%E6%A8%A1%E5%9E%8B"><span class="toc-text"> 基本功能块的执行模型</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%8D%E5%90%88%E5%8A%9F%E8%83%BD%E5%9D%97%E7%B1%BB%E5%9E%8B"><span class="toc-text"> 复合功能块类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9C%8D%E5%8A%A1%E6%8E%A5%E5%8F%A3%E5%8A%9F%E8%83%BD%E5%9D%97%E7%B1%BB%E5%9E%8B"><span class="toc-text"> 服务接口功能块类型</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#27-%E5%88%86%E5%B8%83%E5%BC%8F%E6%A8%A1%E5%9E%8B"><span class="toc-text"> 2.7 分布式模型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#28-%E7%AE%A1%E7%90%86%E6%A8%A1%E5%9E%8B"><span class="toc-text"> 2.8 管理模型</span></a></li></ol></li></ol></div></div></div></div></main><footer id="footer" style="background: #8EC3B0"><div id="footer-wrap"><div class="copyright">&copy;2021 - 2023 By Guohao</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><div class="js-pjax"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.css"><script src="https://cdn.jsdelivr.net/npm/katex/dist/contrib/copy-tex.min.js"></script><script>(() => {
  document.querySelectorAll('#article-container span.katex-display').forEach(item => {
    btf.wrap(item, 'div', { class: 'katex-wrap'})
  })
})()</script><script>function addGitalkSource () {
  const ele = document.createElement('link')
  ele.rel = 'stylesheet'
  ele.href= 'https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.css'
  document.getElementsByTagName('head')[0].appendChild(ele)
}

function loadGitalk () {
  function initGitalk () {
    var gitalk = new Gitalk(Object.assign({
      clientID: 'ea138c6f176d57705144',
      clientSecret: 'c999d74b366c68c80bc3b704c716a8ff8d67af6d',
      repo: 'Dave0126.github.io',
      owner: 'Dave0126',
      admin: ['Dave0126'],
      id: '0977791134aa8ed5f5410207f933517e',
      updateCountCallback: commentCount
    },))

    gitalk.render('gitalk-container')
  }

  if (typeof Gitalk === 'function') initGitalk()
  else {
    addGitalkSource()
    getScript('https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.js').then(initGitalk)
  }
}

function commentCount(n){
  let isCommentCount = document.querySelector('#post-meta .gitalk-comment-count')
  if (isCommentCount) {
    isCommentCount.innerHTML= n
  }
}

if ('Gitalk' === 'Gitalk' || !true) {
  if (true) btf.loadComment(document.getElementById('gitalk-container'), loadGitalk)
  else loadGitalk()
} else {
  function loadOtherComment () {
    loadGitalk()
  }
}</script></div></div></body></html>